{% extends "dashboard/base.html.twig" %}
{% block content %}
    <link rel="stylesheet" href="../../public/css/organizationInternship.css">
    <!-- breadcrumbs -->
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4">
        <div class="d-block mb-4 mb-md-0">
            <nav aria-label="breadcrumb" class="d-none d-md-inline-block">
                <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent">
                    <li class="breadcrumb-item"><a href="{{ path('app_default_index') }}"><span class="fas fa-home"></span></a></li>
                    <li class="breadcrumb-item"><a href="{{ path('app_dashboard_index') }}">{{ 'Dashboard'|trans|capitalize }}</a></li>
                    <li class="breadcrumb-item"><a href="{{ path('app_dashboardorganization_internships') }}">{{ 'Positions'|trans|capitalize }}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ 'Position'|trans|capitalize }}</li>
                </ol>
            </nav>
            {% if internship['@id'] is defined and internship['@id'] is not empty %}
            <h2 class="h4">{{ internship.name }} aanpassen</h2>
            <p class="mb-0">wijzig hier uw vacature</p>
            {% else %}
            <h2 class="h4">Vacature plaatsen</h2>
            <p class="mb-0">Plaats een nieuwe vacature via ons formulier</p>
            {% endif %}
        </div>
    </div>

    <div class="row">
        <!-- left collum -->
        <div class="col-12 col-xl-8">
            <div class="card card-body bg-white border-light shadow-sm mb-4">
                <h2 class="h5 mb-4">Vacature informatie</h2>
                <form action="{{ path('app_dashboardorganization_internships') }}" method="post">
                    {% if internship['@id'] is defined and internship['@id'] is not empty %}
                        <input type="hidden" name="@id" id="@id" value="{{ internship['@id'] }}">
                    {% endif %}
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="name">Naam van de stage</label>
                                <input class="form-control" id="name" type="text"
                                       {% if internship.name is defined and internship.name is not empty %}
                                        value="{{ internship.name }}"{% else %}
                                       placeholder="naam van de stage" {% endif %} name="name" required>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="title">Titel van de stage</label>
                                <input class="form-control" id="title" type="text"
                                    {% if internship.name is defined and internship.name is not empty %}
                                    value="{{ internship.title }}"{% else %}
                                       placeholder="De titel van de stage" {% endif %} name="title" required>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="employmentType">Type werk</label>
                                <select class="form-control" name="employmentType" id="employmentType">
                                    {% if internship.employmentType is defined and internship.employmentType is not empty %}
                                    <option value="{{ internship.employmentType }}">{{ internship.employmentType }}</option>{% endif %}
                                    <option value="full-time">full-time</option>
                                    <option value="part-time">part-time</option>
                                    <option value="temporary"> {{ 'temporary'|trans }} </option>
                                    <option value="seasonal">{{ 'seasonal'|trans }}</option>
                                    <option value="internship">{{ 'internship'|trans }}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="standardHours"> {{ 'standard hours'|trans|capitalize }} per week </label>
                                <input class="form-control" id="standardHours" name="standardHours" type="text" step="1" pattern="\d+"
                                    {% if internship.standardHours is defined and internship.standardHours is not empty %}
                                        value="{{ internship.standardHours }}"{% else %}
                                       placeholder="Uren per week voor de positie" {% endif %} required>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="salaryCurrency"> {{ 'salary currency'|trans|capitalize }} </label>
                                <input class="form-control form-control-sm" id="salaryCurrency" name="salaryCurrency" type="text"
                                    {% if internship.salaryCurrency is defined and internship.salaryCurrency is not empty %}
                                        value="{{ internship.salaryCurrency }}"{% else %}
                                        placeholder="Valuta waarin de medewerker betaald wordt (EUR,USD etc)" {% endif %} required>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="baseSalary">{{ 'Maandsalaris'|trans|capitalize }}</label>
                                <input class="form-control" id="baseSalary" name="baseSalary" type="text"
                                    {% if internship.baseSalary is defined and internship.baseSalary is not empty %}
                                        value="{{ internship.baseSalary }}"{% else %}
                                        placeholder="Salaris voor de medewerker"{% endif %} required>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="summary">{{ 'summary'|trans|capitalize }}</label>
                                <input class="form-control" id="summary" name="summary" type="text"
                                    {% if internship.summary is defined and internship.summary is not empty %}
                                        value="{{ internship.summary }}"{% else %}
                                        placeholder="Een korte omschrijving van de vacature"{% endif %} required>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="hiringOrganization"> {{ 'organization'|trans|capitalize }} </label>
                                <select class="form-control" id="hiringOrganization" name="hiringOrganization">
                                    {% if organizations is defined %}
                                    {% for bedrijf in organizations %}
                                    <option value="{{ bedrijf['@id'] }}">{{ bedrijf.name }}</option>
                                    {% endfor %}
                                        {% elseif internship.hiringOrganization is defined and internship.hiringOrganization is not empty %}
                                            <option value="{{ internship.hiringOrganization }}">{{  commonground_resource(internship.hiringOrganization).name }}</option>

                                    {% endif %}
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group" id="Requirements">
                                <label for="educationRequirements[]">voorwaarden stage (alles waar de solicitant aan moet voldoen)<br>
                                    <strong> Druk op de blauwe knop om meer voorwaarden toe te voegen</strong><br>Opleiding:</label>
                                {% if internship.educationRequirements is defined and internship.educationRequirements is not empty %}
                                {% for educationRequirements in  internship['educationRequirements'] %}
                                <input class="form-control" id="educationRequirements[]" type="text" value="{{ educationRequirements }}" placeholder="Vul hier 1 voorwaarden in" name="educationRequirements[]" required>
                                {% endfor %}
                                    {% else %}
                                        <input class="form-control" id="educationRequirements[]" type="text" placeholder="Voorbeeld: Opleiding: MBO 3 ICT Beheer" name="educationRequirements[]" required>
                                {% endif %}
                                <button type="button" class="btn btn-sm btn-primary" onclick="addRequirements();">Nieuwe voorwaarden</button>

                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="form-group">
                                <label for="jobLocationType">Locatie van de stage</label>
                                <input class="form-control" id="jobLocationType" type="text"
                                    {% if internship.jobLocationType is defined and internship.jobLocationType is not empty %}
                                    value="{{ internship.jobLocationType }}"{% else %}
                                       placeholder="adres waar de stagair gaat werken"{% endif %} name="jobLocationType" required>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="form-group">
                            <label for="jobStartDate">Begindatum van de stage</label>
                            <input class="form-control" id="jobStartDate" type="datetime-local"
                                {% if internship.jobStartDate is defined and internship.jobStartDate is not empty %}
                                value="{{ internship.jobStartDate }}"{% else %}
                                   placeholder="format jaar-maand-dag"{% endif %} name="jobStartDate" required>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="form-group">
                            <label for="validThrough">Einddatum van de stage</label>
                            <input class="form-control" id="validThrough" type="datetime-local"
                                {% if internship.validThrough is defined and internship.validThrough is not empty %}
                                    value="{{ internship.validThrough }}"{% else %}
                                   placeholder="format jaar-maand-dag" {% endif %} name="validThrough" required>
                        </div>
                    </div>

                    <div class="row align-items-center">
                        <div class="col-md-12 mb-3">
                            <div class="form-group">
                                <label for="description">Beschrijving</label>
                                {% if internship.description is defined and internship.description is not empty %}
                                <textarea class="form-control" id="description" name="description" rows="3" cols="6">{{ internship.description }}</textarea>
                                {% else %}
                                <textarea class="form-control" id="description" name="description" placeholder="uitgebreide omschrijving van de vacature" rows="3" cols="6"></textarea>{% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>

            <h3 class="h4">{{'applicants'|trans|capitalize}}</h3>
            <p class="mb-0">
                {{'these people have applied to your position'|trans|capitalize}}</p>

            <div class="card card-body border-light shadow-sm table-wrapper table-responsive pt-0">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th class="border-0">
                            <div class="form-check dashboard-check">
                                <input class="form-check-input" type="checkbox" value="" id="userCheck55">
                                <label class="form-check-label" for="userCheck55"></label>
                            </div>
                        </th>
                        <th class="border-0">{{'name'|trans|capitalize}}</th>
                        <th class="border-0">{{'date created'|trans|capitalize}}</th>
                        <th class="border-0">{{'status'|trans|capitalize}}</th>
                        <th class="border-0">{{'action'|trans|capitalize}}</th>
                    </tr>
                    </thead>
                    {#for loop voor de applications op de position maken #}
                    {% if applications is defined and applications is not empty %}
                        {% for application in applications %}
                    <tbody>
                        <tr>
                            <td>
                                <div class="form-check dashboard-check">
                                    <input class="form-check-input" type="checkbox" value="" id="userCheck1">
                                    <label class="form-check-label" for="userCheck1"></label>
                                </div>
                            </td>
                            <td>
                                <a href="#" class="d-flex align-items-center"><img src="../../assets/img/team/profile-picture-1.jpg" class="user-avatar rounded-circle mr-3" alt="Avatar">
                                    <div class="d-block"><span class="font-weight-bold">{{ commonground_resource(employee.person).name }}</span>
                                        <div class="small text-gray">
                                            {% if commonground_resource(employee.person).emais is defined and commonground_resource(employee.person).emais is not empty %}
                                            {{ commonground_resource(employee.person).emais[0] }}
                                            {% else %}
                                            {{ 'no email available'|trans|capitalize }}
                                            {% endif %}
                                        </div>
                                    </div>
                                </a>
                            </td>
                            <td><span class="font-weight-normal">{{ application.dateCreated|date("Y-m-d") }}</span></td>
                            <td><span class="font-weight-normal text-warning">{{ application.status }}</span></td>
                            <td>
                                <div class="btn-group">
                                    <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split m-0 p-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="icon icon-sm"><span class="fas fa-ellipsis-h icon-dark"></span> </span><span class="sr-only">Toggle Dropdown</span></button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" data-toggle="modal" data-target="#modal-default"><span class="fas fa-eye mr-2"></span>{{ 'view details'|trans|capitalize }}</a>
                                        <a class="dropdown-item text-danger" href="#"><span class="fas fa-user-times mr-2"></span>{{ 'delete application'|trans|capitalize }}</a></div>
                                </div>
                                <a href="#" class="text-danger ml-2" title="" data-toggle="tooltip" data-original-title="Delete"><span class="fas fa-times-circle"></span></a>
                            </td>
                        </tr>
                    </tbody>
                            {# Popup for viewing details               #}
                            <div class="modal fade" id="modal-default" tabindex="-1" role="dialog" aria-labelledby="modal-default" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h6 class="modal-title">{{ 'details of application'|trans|capitalize }}</h6>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>{{ application.motivation }}</p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-link text-danger ml-auto" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                        {% else %}
                        <tbody>
                        <tr>
                            <td>
                                <p>{{ 'No applications found'|trans|capitalize }}</p>
                            </td>
                        </tr>
                        </tbody>
                    {% endif %}
                </table>


                <div class="card-footer px-3 d-flex align-items-center justify-content-between">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination mb-0">
                            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item active"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">4</a></li>
                            <li class="page-item"><a class="page-link" href="#">5</a></li>
                            <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                    </nav>
                    <div class="font-weight-bold small">Showing <b>5</b> out of <b>25</b> entries</div>
                </div>

            </div>
        </div>
    </div>

        <!-- right collum -->
        <div class="col-6 col-xl-4">
{#            <div class="row">#}
{#                <div class="col-12 col-sm-6 col-xl-12">#}
{#                    <div class="card card-body bg-white border-light shadow-sm mb-4">#}
{#                        <h2 class="h5 mb-4">Select profile photo</h2>#}
{#                        <div class="d-xl-flex align-items-center">#}
{#                            <div>#}
{#                                <div class="user-avatar xl-avatar mb-3"><img class="rounded" src="../../assets/img/team/profile-picture-3.jpg" alt="change avatar"></div>#}
{#                            </div>#}
{#                            <div class="file-field">#}
{#                                <div class="d-flex justify-content-xl-center ml-xl-3">#}
{#                                    <div class="d-flex"><span class="icon icon-md"><span class="fas fa-paperclip mr-3"></span></span>#}
{#                                        <input type="file">#}
{#                                        <div class="d-md-block text-left">#}
{#                                            <div class="font-weight-normal text-dark mb-1">Choose Image</div>#}
{#                                            <div class="text-gray small">JPG, GIF or PNG. Max size of 800K</div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#                <div class="col-12 col-sm-6 col-xl-12">#}
{#                    <div class="card card-body bg-white border-light shadow-sm mb-4">#}
{#                        <h2 class="h5 mb-4">Select cover photo</h2>#}
{#                        <div class="d-xl-flex align-items-center">#}
{#                            <div>#}
{#                                <div class="user-avatar xl-avatar mb-3"><img class="rounded" src="../../assets/img/carousel/image-2.jpg" alt="change avatar"></div>#}
{#                            </div>#}
{#                            <div class="file-field">#}
{#                                <div class="d-flex justify-content-xl-center ml-xl-3">#}
{#                                    <div class="d-flex"><span class="icon icon-md"><span class="fas fa-paperclip mr-3"></span></span>#}
{#                                        <input type="file">#}
{#                                        <div class="d-md-block text-left">#}
{#                                            <div class="font-weight-normal text-dark mb-1">Choose Image</div>#}
{#                                            <div class="text-gray small">JPG, GIF or PNG. Max size of 800K</div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#                <div class="col-12 mb-4 mb-xl-0">#}
{#                    <div class="card card-body bg-white border-light">#}
{#                        <h2 class="h5 mb-4">Alerts &amp; Notifications</h2>#}
{#                        <ul class="list-group list-group-flush">#}
{#                            <li class="list-group-item d-flex align-items-center justify-content-between px-0 border-bottom">#}
{#                                <div>#}
{#                                    <h3 class="h6 mb-1">Company News</h3>#}
{#                                    <p class="small pr-4">Get Rocket news, announcements, and product updates</p>#}
{#                                </div>#}
{#                                <div>#}
{#                                    <div class="custom-control custom-switch">#}
{#                                        <input type="checkbox" class="custom-control-input" id="user-notification-1" checked="checked">#}
{#                                        <label class="custom-control-label" for="user-notification-1"></label>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </li>#}
{#                            <li class="list-group-item d-flex align-items-center justify-content-between px-0 border-bottom">#}
{#                                <div>#}
{#                                    <h3 class="h6 mb-1">Account Activity</h3>#}
{#                                    <p class="small pr-4">Get important notifications about you or activity you've missed</p>#}
{#                                </div>#}
{#                                <div>#}
{#                                    <div class="custom-control custom-switch">#}
{#                                        <input type="checkbox" class="custom-control-input" id="user-notification-2">#}
{#                                        <label class="custom-control-label" for="user-notification-2"></label>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </li>#}
{#                            <li class="list-group-item d-flex align-items-center justify-content-between px-0">#}
{#                                <div>#}
{#                                    <h3 class="h6 mb-1">Meetups Near You</h3>#}
{#                                    <p class="small pr-4">Get an email when a Dribbble Meetup is posted close to my location</p>#}
{#                                </div>#}
{#                                <div>#}
{#                                    <div class="custom-control custom-switch">#}
{#                                        <input type="checkbox" class="custom-control-input" id="user-notification-3" checked="checked">#}
{#                                        <label class="custom-control-label" for="user-notification-3"></label>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </li>#}
{#                        </ul>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
        </div>
    </div>

    <script>
        function addRequirements() {
            //maakt nieuw input veld voor educationRequirements[]
            const formDiv = document.getElementById('Requirements');
            const input = document.createElement('input');

            input.setAttribute('type','text');
            input.setAttribute('class',"form-control");
            input.setAttribute('name','educationRequirements[]');
            input.setAttribute('id','educationRequirements[]');
            input.setAttribute('placeholder', "Nieuwe voorwaarden");

            formDiv.appendChild(input);
        }


    </script>

{% endblock %}
